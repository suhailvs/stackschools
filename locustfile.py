from locust import HttpUser, task

class TestSchools(HttpUser):
    @task
    def hello_world(self):
        base_url = "/" #https://stackschools.com/" # "http://localhost:8000/" #
        self.client.get(base_url)

        asm = f'{base_url}schools/32060200110/'
        self.client.get(asm)

        asm_kerala = f'{base_url}schools/21009/'
        self.client.get(asm_kerala)

        limeric_college = f'{base_url}bp/351803/'
        self.client.get(limeric_college)

# locust --headless --users 20 --spawn-rate 4 -H http://t.isminspire.com

"""
with out db index

         Aggregated                              116     0(0.00%) |   9657     665   28122   7800 |    1.60        0.00

Type     Name                                 # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|-----------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /                                        41     0(0.00%) |  16610    7388   28122  18000 |    0.80        0.00
GET      /bp/351803/                              25     0(0.00%) |   2000     665    4910   1500 |    0.10        0.00
GET      /schools/21009/                          25     0(0.00%) |   2788     977    7975   1800 |    0.30        0.00
GET      /schools/32060200110/                    28     0(0.00%) |  12570    5565   23145  13000 |    0.40        0.00
--------|-----------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                              119     0(0.00%) |   9686     665   28122   8000 |    1.60        0.00


adding db index to schools

Type     Name                                                                          # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /                                                                                 60     0(0.00%) |  16223    6769   24417  18000 |    0.82        0.00
GET      /bp/351803/                                                                       53     0(0.00%) |   1413     597    4715   1200 |    0.73        0.00
GET      /schools/21009/                                                                   57     0(0.00%) |   1801     944    2764   1800 |    0.78        0.00
GET      /schools/32060200110/                                                             58     0(0.00%) |   3124    1164   10200   2200 |    0.80        0.00
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                                       228     0(0.00%) |   5843     597   24417   2100 |    3.13        0.00


Type     Name                                                                          # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /                                                                                 64     0(0.00%) |   6756    2664   10814   7100 |    1.40        0.00
GET      /bp/351803/                                                                       52     0(0.00%) |   1327     696    3032   1300 |    1.90        0.00
GET      /schools/21009/                                                                   53     0(0.00%) |   2268    1257    4682   1900 |    1.60        0.00
GET      /schools/32060200110/                                                             61     0(0.00%) |   2503    1499    4942   2200 |    1.50        0.00
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------


Type     Name                                                                          # reqs      # fails |    Avg     Min     Max    Med |   req/s  failures/s
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
GET      /                                                                                 63     0(0.00%) |   6210    1915    9700   6600 |    1.71        0.00
GET      /bp/351803/                                                                       54     0(0.00%) |   1257     711    2251   1300 |    1.46        0.00
GET      /schools/21009/                                                                   55     0(0.00%) |   1689     909    3032   1600 |    1.49        0.00
GET      /schools/32060200110/                                                             61     0(0.00%) |   1757     820    2971   1800 |    1.65        0.00
--------|----------------------------------------------------------------------------|-------|-------------|-------|-------|-------|-------|--------|-----------
         Aggregated                                                                       233     0(0.00%) |   2829     711    9700   1700 |    6.31        0.00

"""